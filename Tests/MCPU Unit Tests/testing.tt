<#@ template debug="false" hostspecific="false" language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ output extension=".ps1" #>
<#	
	void print(string msg)
	{
		foreach (string l in msg.Split('\n'))
		{
			string ll = l.TrimEnd();

			WriteLine(ll.Length > 0 ? $"echo \"{ll}\"" : "write-host \"`n\"");
		}
	}
#>
# Autogenerated  <#=$"{DateTime.Now:yyyy-MM-dd HH:mm:ss:ffffff}   {TimeZoneInfo.Local.DisplayName}" #>

param(
    [string]$mode = "internal"
)

<# print(@"
-------------------------------------------------------
         MCPU Compiler and Library Unit Tests
-------------------------------------------------------
"); #>

if ($mode -eq "internal")
{
    ".\MCPU Tester.exe" -unittests
}
if ($mode -eq "mstest")
{
    mstest -testcontainer:".\mcpu.unit-tests.dll"
}

<# print(@"
-------------------------------------------------------
    Visit https://github.com/Unknown6656/MCPU/ for
	    more information about the MCPU-project
-------------------------------------------------------
"); #>
